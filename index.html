<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<style>
.material-symbols-outlined {
    cursor: pointer;
    float: right;
    font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 48;
}
#material-symbols-outlined-backward {
    cursor: pointer;
    float: left;
    font-variation-settings:
        'FILL' 0,
        'wght' 400,
        'GRAD' 0,
        'opsz' 48;
}
#img-data{
    width:1000px;
    height:400px;
}
    </style>
<body>
<h1 style='text-align:center;'>Search the text in the input and you will get an image</h1>
<form onclick="event.preventDefault()">
  <input type='text' id='search-txt'>
  <button onclick='getImg()'>Search</button>
  </form>
      <div id="image-container">
      </div>
      <center>
      <img id="img-data">
      </center>
      <span id="material-symbols-outlined-forward">
      <span class="material-symbols-outlined">
        arrow_forward_ios
        </span>
        </span>
        <span id="material-symbols-outlined-backward">
            <span class="material-symbols-outlined">
                arrow_back_ios
                </span>
            </span>
    <script>
        let counter = 1;
const accessKey = 'JunlsSkxYn3h43yY7iXg8kNtgHORpyIjjJvehFDRUAs';

const headers = new Headers({
  'Authorization': `Client-ID ${accessKey}`
});
let arr = []
function getImg() {
    arr = []
    const imageContainer = document.getElementById('image-container');
    while (imageContainer.firstChild) {
        imageContainer.removeChild(imageContainer.firstChild);
    }
    let searchTxt = document.getElementById('search-txt')
    fetch(`https://api.unsplash.com/search/photos?query=${searchTxt.value}&per_page=5`, { headers })

        .then(response => response.json())
        .then(data => {
            console.log(data);
            for (let i = 0; i < data.results.length; i++) {
                const imageUrl = data.results[i].urls.regular;
                arr.push(imageUrl)
                console.log(arr)
            }
            document.getElementById('img-data').src = arr[0]
            /*for (let i = 0; i < arr.length; i++) {
                const imageElement = document.createElement('img');
                imageElement.src = arr[i]

                document.getElementById('image-container').appendChild(imageElement);
                const downloadButton = document.createElement('button');
                downloadButton.innerHTML = 'Download';
                downloadButton.addEventListener('click', e => {
                    e.preventDefault();
                    downloadImage(arr[i]);
                });
                document.getElementById('image-container').appendChild(downloadButton);
            }*/
        })
        .catch(error => {
            console.error(error);
        });
}
function downloadImage(imageUrl) {
    fetch(imageUrl)
        .then(response => response.blob())
        .then(blob => {
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = imageUrl.split('/').pop() + '.jpg';
            link.click();
            URL.revokeObjectURL(url);
        });
}

let forwardBtn = document.getElementById('material-symbols-outlined-forward')
            forwardBtn.onclick = () =>
            {
                //alert(counter)
                //alert('sui')
                counter++;
                let imageAp = document.getElementById('img-data')
                if(counter==arr.length - 1 || counter==arr.length)
                {
                    alert('sui')
                    counter = 0
                }
                imageAp.src = arr[counter]
            }

            let backwardBtn = document.getElementById('material-symbols-outlined-backward')
            backwardBtn.onclick = () =>
            {
                //alert(counter)
                //alert('sui')
                counter--;
                let imageAp = document.getElementById('img-data')
                if(counter==-1)
                {
                    counter = arr.length - 1
                }
                imageAp.src = arr[counter]
            }
    </script>
</body>
</html>
